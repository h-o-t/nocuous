"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const ts_morph_1 = require("ts-morph");
exports.stat = async function stat(sourceFile) {
  let count = 0;
  let score = 0;
  sourceFile.forEachDescendant(node => {
    if (ts_morph_1.TypeGuards.isSwitchStatement(node)) {
      count++;
      const hasDefaultClause = node
        .getCaseBlock()
        .getClauses()
        .some(node => ts_morph_1.TypeGuards.isDefaultClause(node));
      if (!hasDefaultClause) {
        score++;
      }
    }
  });
  return count
    ? {
        metric: "missingSwitchDefault",
        level: "statement",
        count,
        threshold: 1,
        score
      }
    : undefined;
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWlzc2luZ1N3aXRjaERlZmF1bHQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi9zcmMvc3RhdHMvbWlzc2luZ1N3aXRjaERlZmF1bHQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSx1Q0FBc0M7QUFHekIsUUFBQSxJQUFJLEdBQXNCLEtBQUssVUFBVSxJQUFJLENBQUMsVUFBVTtJQUNuRSxJQUFJLEtBQUssR0FBRyxDQUFDLENBQUM7SUFDZCxJQUFJLEtBQUssR0FBRyxDQUFDLENBQUM7SUFDZCxVQUFVLENBQUMsaUJBQWlCLENBQUMsSUFBSSxDQUFDLEVBQUU7UUFDbEMsSUFBSSxxQkFBVSxDQUFDLGlCQUFpQixDQUFDLElBQUksQ0FBQyxFQUFFO1lBQ3RDLEtBQUssRUFBRSxDQUFDO1lBQ1IsTUFBTSxnQkFBZ0IsR0FBRyxJQUFJO2lCQUMxQixZQUFZLEVBQUU7aUJBQ2QsVUFBVSxFQUFFO2lCQUNaLElBQUksQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLHFCQUFVLENBQUMsZUFBZSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUM7WUFDbEQsSUFBSSxDQUFDLGdCQUFnQixFQUFFO2dCQUNyQixLQUFLLEVBQUUsQ0FBQzthQUNUO1NBQ0Y7SUFDSCxDQUFDLENBQUMsQ0FBQztJQUNILE9BQU8sS0FBSztRQUNWLENBQUMsQ0FBQztZQUNFLE1BQU0sRUFBRSxzQkFBc0I7WUFDOUIsS0FBSyxFQUFFLFdBQVc7WUFDbEIsS0FBSztZQUNMLFNBQVMsRUFBRSxDQUFDO1lBQ1osS0FBSztTQUNOO1FBQ0gsQ0FBQyxDQUFDLFNBQVMsQ0FBQztBQUNoQixDQUFDLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBUeXBlR3VhcmRzIH0gZnJvbSBcInRzLW1vcnBoXCI7XG5pbXBvcnQgeyBTdGF0LCBTdGF0T3B0aW9ucyB9IGZyb20gXCIuLi9pbnRlcmZhY2VzXCI7XG5cbmV4cG9ydCBjb25zdCBzdGF0OiBTdGF0PFN0YXRPcHRpb25zPiA9IGFzeW5jIGZ1bmN0aW9uIHN0YXQoc291cmNlRmlsZSkge1xuICBsZXQgY291bnQgPSAwO1xuICBsZXQgc2NvcmUgPSAwO1xuICBzb3VyY2VGaWxlLmZvckVhY2hEZXNjZW5kYW50KG5vZGUgPT4ge1xuICAgIGlmIChUeXBlR3VhcmRzLmlzU3dpdGNoU3RhdGVtZW50KG5vZGUpKSB7XG4gICAgICBjb3VudCsrO1xuICAgICAgY29uc3QgaGFzRGVmYXVsdENsYXVzZSA9IG5vZGVcbiAgICAgICAgLmdldENhc2VCbG9jaygpXG4gICAgICAgIC5nZXRDbGF1c2VzKClcbiAgICAgICAgLnNvbWUobm9kZSA9PiBUeXBlR3VhcmRzLmlzRGVmYXVsdENsYXVzZShub2RlKSk7XG4gICAgICBpZiAoIWhhc0RlZmF1bHRDbGF1c2UpIHtcbiAgICAgICAgc2NvcmUrKztcbiAgICAgIH1cbiAgICB9XG4gIH0pO1xuICByZXR1cm4gY291bnRcbiAgICA/IHtcbiAgICAgICAgbWV0cmljOiBcIm1pc3NpbmdTd2l0Y2hEZWZhdWx0XCIsXG4gICAgICAgIGxldmVsOiBcInN0YXRlbWVudFwiLFxuICAgICAgICBjb3VudCxcbiAgICAgICAgdGhyZXNob2xkOiAxLFxuICAgICAgICBzY29yZVxuICAgICAgfVxuICAgIDogdW5kZWZpbmVkO1xufTtcbiJdfQ==
