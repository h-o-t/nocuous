"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
function countBaseTypes(node) {
  let count = 1;
  const baseTypes = node.getBaseTypes();
  for (const baseType of baseTypes) {
    count += countBaseTypes(baseType);
  }
  return count;
}
exports.stat = async function stat(sourceFile, { threshold }) {
  const classes = sourceFile.getClasses();
  const count = classes.length;
  let score = 0;
  for (const classNode of classes) {
    const count = countBaseTypes(classNode);
    score += threshold > 0 && count >= threshold ? count / threshold : 0;
  }
  return count
    ? {
        metric: "classFanOutComplexity",
        level: "class",
        count,
        threshold,
        score
      }
    : undefined;
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY2xhc3NGYW5PdXRDb21wbGV4aXR5LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vc3JjL3N0YXRzL2NsYXNzRmFuT3V0Q29tcGxleGl0eS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQU1BLFNBQVMsY0FBYyxDQUFDLElBQW9DO0lBQzFELElBQUksS0FBSyxHQUFHLENBQUMsQ0FBQztJQUNkLE1BQU0sU0FBUyxHQUFHLElBQUksQ0FBQyxZQUFZLEVBQUUsQ0FBQztJQUN0QyxLQUFLLE1BQU0sUUFBUSxJQUFJLFNBQVMsRUFBRTtRQUNoQyxLQUFLLElBQUksY0FBYyxDQUFDLFFBQVEsQ0FBQyxDQUFDO0tBQ25DO0lBQ0QsT0FBTyxLQUFLLENBQUM7QUFDZixDQUFDO0FBVVksUUFBQSxJQUFJLEdBQXNCLEtBQUssVUFBVSxJQUFJLENBQ3hELFVBQVUsRUFDVixFQUFFLFNBQVMsRUFBRTtJQUViLE1BQU0sT0FBTyxHQUFHLFVBQVUsQ0FBQyxVQUFVLEVBQUUsQ0FBQztJQUN4QyxNQUFNLEtBQUssR0FBRyxPQUFPLENBQUMsTUFBTSxDQUFDO0lBQzdCLElBQUksS0FBSyxHQUFHLENBQUMsQ0FBQztJQUNkLEtBQUssTUFBTSxTQUFTLElBQUksT0FBTyxFQUFFO1FBQy9CLE1BQU0sS0FBSyxHQUFHLGNBQWMsQ0FBQyxTQUFTLENBQUMsQ0FBQztRQUN4QyxLQUFLLElBQUksU0FBUyxHQUFHLENBQUMsSUFBSSxLQUFLLElBQUksU0FBUyxDQUFDLENBQUMsQ0FBQyxLQUFLLEdBQUcsU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7S0FDdEU7SUFDRCxPQUFPLEtBQUs7UUFDVixDQUFDLENBQUM7WUFDRSxNQUFNLEVBQUUsdUJBQXVCO1lBQy9CLEtBQUssRUFBRSxPQUFPO1lBQ2QsS0FBSztZQUNMLFNBQVM7WUFDVCxLQUFLO1NBQ047UUFDSCxDQUFDLENBQUMsU0FBUyxDQUFDO0FBQ2hCLENBQUMsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFR5cGUgfSBmcm9tIFwidHMtbW9ycGhcIjtcbmltcG9ydCB7IFN0YXQsIFN0YXRPcHRpb25zIH0gZnJvbSBcIi4uL2ludGVyZmFjZXNcIjtcblxuLyoqXG4gKiBSZWN1cnNpdmVseSBjb3VudHMgdGhlIGJhc2UgdHlwZXMgZm9yIGEgZ2l2ZW4gbm9kZS5cbiAqL1xuZnVuY3Rpb24gY291bnRCYXNlVHlwZXMobm9kZTogeyBnZXRCYXNlVHlwZXM6ICgpID0+IFR5cGVbXSB9KTogbnVtYmVyIHtcbiAgbGV0IGNvdW50ID0gMTtcbiAgY29uc3QgYmFzZVR5cGVzID0gbm9kZS5nZXRCYXNlVHlwZXMoKTtcbiAgZm9yIChjb25zdCBiYXNlVHlwZSBvZiBiYXNlVHlwZXMpIHtcbiAgICBjb3VudCArPSBjb3VudEJhc2VUeXBlcyhiYXNlVHlwZSk7XG4gIH1cbiAgcmV0dXJuIGNvdW50O1xufVxuXG4vKipcbiAqIEVudW1lcmF0ZXMgdGhlIGNsYXNzZXMgaW4gYSBzb3VyY2UgZmlsZSBhbmQgcmVjdXJzaXZlbHkgY291bnRzIHRoZSBudW1iZXIgb2ZcbiAqIFwiYmFzZSB0eXBlc1wiIGEgY2xhc3MgaXMgZGVwZW5kZW50IHVwb24sIHdoZXJlIGEgbWl4aW4sIGludGVyZmFjZSBvciBhbm90aGVyXG4gKiBjbGFzcyBjb3VudHMuXG4gKlxuICogSGF2aW5nIGEgaGlnaCBsZXZlbCBvZiBjb21wbGV4aXR5IGluIHRoZSBkZXBlbmRlbmN5IFwiY2hhaW5cIiBvZiBjbGFzc2VzIG1ha2VzXG4gKiBjb2RlIG1vcmUgZnJhZ2lsZSBhbmQgaGFyZGVyIHRvIG1haW50YWluIHdpdGhvdXQgaW50cm9kdWNpbmcgcmVncmVzc2lvbnMuXG4gKi9cbmV4cG9ydCBjb25zdCBzdGF0OiBTdGF0PFN0YXRPcHRpb25zPiA9IGFzeW5jIGZ1bmN0aW9uIHN0YXQoXG4gIHNvdXJjZUZpbGUsXG4gIHsgdGhyZXNob2xkIH1cbikge1xuICBjb25zdCBjbGFzc2VzID0gc291cmNlRmlsZS5nZXRDbGFzc2VzKCk7XG4gIGNvbnN0IGNvdW50ID0gY2xhc3Nlcy5sZW5ndGg7XG4gIGxldCBzY29yZSA9IDA7XG4gIGZvciAoY29uc3QgY2xhc3NOb2RlIG9mIGNsYXNzZXMpIHtcbiAgICBjb25zdCBjb3VudCA9IGNvdW50QmFzZVR5cGVzKGNsYXNzTm9kZSk7XG4gICAgc2NvcmUgKz0gdGhyZXNob2xkID4gMCAmJiBjb3VudCA+PSB0aHJlc2hvbGQgPyBjb3VudCAvIHRocmVzaG9sZCA6IDA7XG4gIH1cbiAgcmV0dXJuIGNvdW50XG4gICAgPyB7XG4gICAgICAgIG1ldHJpYzogXCJjbGFzc0Zhbk91dENvbXBsZXhpdHlcIixcbiAgICAgICAgbGV2ZWw6IFwiY2xhc3NcIixcbiAgICAgICAgY291bnQsXG4gICAgICAgIHRocmVzaG9sZCxcbiAgICAgICAgc2NvcmVcbiAgICAgIH1cbiAgICA6IHVuZGVmaW5lZDtcbn07XG4iXX0=
